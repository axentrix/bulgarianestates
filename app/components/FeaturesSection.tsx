'use client'

import { useState } from 'react'
import { getImagePath } from '../utils/imagePath'

export default function FeaturesSection() {
  const [expandedCards, setExpandedCards] = useState<number[]>([])

  const toggleCard = (index: number) => {
    setExpandedCards(prev => 
      prev.includes(index) 
        ? prev.filter(i => i !== index)
        : [...prev, index]
    )
  }

  const features = [
    {
      icon: (
        <svg width="48" height="48" viewBox="0 0 48 49" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path d="M24 5.08813C20.1433 5.08813 16.3731 6.23179 13.1664 8.37448C9.95963 10.5172 7.46027 13.5626 5.98436 17.1258C4.50845 20.689 4.12228 24.6098 4.8747 28.3924C5.62711 32.175 7.4843 35.6496 10.2114 38.3767C12.9386 41.1038 16.4131 42.961 20.1957 43.7134C23.9784 44.4659 27.8992 44.0797 31.4623 42.6038C35.0255 41.1279 38.071 38.6285 40.2137 35.4218C42.3564 32.215 43.5 28.4449 43.5 24.5881C43.4945 19.4181 41.4383 14.4614 37.7826 10.8056C34.1268 7.14981 29.1701 5.09359 24 5.08813ZM24 41.0881C20.7366 41.0881 17.5465 40.1204 14.8331 38.3074C12.1197 36.4943 10.0048 33.9174 8.756 30.9024C7.50715 27.8874 7.1804 24.5698 7.81705 21.3691C8.45371 18.1685 10.0252 15.2284 12.3327 12.9209C14.6403 10.6133 17.5803 9.04183 20.781 8.40518C23.9817 7.76852 27.2993 8.09528 30.3143 9.34412C33.3293 10.593 35.9062 12.7078 37.7193 15.4212C39.5323 18.1346 40.5 21.3247 40.5 24.5881C40.495 28.9627 38.7551 33.1566 35.6618 36.2499C32.5685 39.3432 28.3746 41.0832 24 41.0881ZM15 20.8381C15 20.3931 15.132 19.9581 15.3792 19.5881C15.6264 19.2181 15.9778 18.9297 16.389 18.7594C16.8001 18.5891 17.2525 18.5446 17.689 18.6314C18.1254 18.7182 18.5263 18.9325 18.841 19.2471C19.1557 19.5618 19.37 19.9627 19.4568 20.3992C19.5436 20.8356 19.499 21.288 19.3287 21.6992C19.1584 22.1103 18.8701 22.4617 18.5 22.7089C18.13 22.9562 17.695 23.0881 17.25 23.0881C16.6533 23.0881 16.081 22.8511 15.659 22.4291C15.2371 22.0072 15 21.4349 15 20.8381ZM33 20.8381C33 21.2831 32.868 21.7182 32.6208 22.0882C32.3736 22.4582 32.0222 22.7466 31.611 22.9169C31.1999 23.0872 30.7475 23.1317 30.3111 23.0449C29.8746 22.9581 29.4737 22.7438 29.159 22.4291C28.8444 22.1145 28.6301 21.7135 28.5432 21.2771C28.4564 20.8406 28.501 20.3882 28.6713 19.9771C28.8416 19.566 29.13 19.2146 29.5 18.9673C29.87 18.7201 30.305 18.5881 30.75 18.5881C31.3467 18.5881 31.919 18.8252 32.341 19.2471C32.763 19.6691 33 20.2414 33 20.8381ZM32.7994 29.8381C30.87 33.1738 27.6619 35.0881 24 35.0881C20.3381 35.0881 17.1319 33.1756 15.2025 29.8381C15.094 29.6475 15.1613 29.4244 15.3175 29.2681C15.4738 29.1119 15.6969 29.0444 15.8875 29.0919C16.0781 29.1394 16.2319 29.2956 16.3069 29.4919C16.3819 29.6881 16.37 29.9081 16.2731 30.0956C14.5781 32.8831 19.2144 33.5881 24 33.5881C28.7856 33.5881 29.4219 32.8831 27.7269 30.0956C27.63 29.9081 27.6181 29.6881 27.6931 29.4919C27.7681 29.2956 27.9219 29.1394 28.1125 29.0919C28.3031 29.0444 28.5262 29.1119 28.6825 29.2681C28.8387 29.4244 28.906 29.6475 28.7994 29.8381Z" fill="#299393"/>
        </svg>
      ),
      title: "12+ години опит",
      description: "Вече 12 години се грижим за максималната защита на интересите на нашите клиенти и правим всичко възможно, за да са доволни."
    },
    {
      icon: (
        <svg width="44" height="44" viewBox="0 0 44 45" fill="none" xmlns="http://www.w3.org/2000/svg">
          <g clipPath="url(#clip0_96_1445)">
            <path d="M35.75 23.9631C36.6953 23.9631 37.5833 24.1422 38.4141 24.5002C39.2448 24.8583 39.9753 25.3453 40.6055 25.9612C41.2357 26.5771 41.7298 27.3075 42.0879 28.1526C42.446 28.9976 42.625 29.8928 42.625 30.8381C42.625 31.5829 42.5104 32.3062 42.2812 33.0081C42.0521 33.7099 41.7083 34.3616 41.25 34.9631V44.0725L35.75 41.3225L30.25 44.0725V34.9631C29.806 34.3616 29.4694 33.7099 29.2402 33.0081C29.0111 32.3062 28.8893 31.5829 28.875 30.8381C28.875 29.8928 29.054 29.0048 29.4121 28.1741C29.7702 27.3433 30.2572 26.6129 30.873 25.9827C31.4889 25.3525 32.2194 24.8583 33.0645 24.5002C33.9095 24.1422 34.8047 23.9631 35.75 23.9631ZM35.75 26.7131C35.1771 26.7131 34.64 26.8206 34.1387 27.0354C33.6374 27.2502 33.2005 27.5439 32.8281 27.9163C32.4557 28.2887 32.1621 28.7255 31.9473 29.2268C31.7324 29.7281 31.625 30.2652 31.625 30.8381C31.625 31.4111 31.7324 31.9482 31.9473 32.4495C32.1621 32.9508 32.4557 33.3876 32.8281 33.76C33.2005 34.1324 33.6374 34.426 34.1387 34.6409C34.64 34.8557 35.1771 34.9631 35.75 34.9631C36.3229 34.9631 36.86 34.8557 37.3613 34.6409C37.8626 34.426 38.2995 34.1324 38.6719 33.76C39.0443 33.3876 39.3379 32.9508 39.5527 32.4495C39.7676 31.9482 39.875 31.4111 39.875 30.8381C39.875 30.2652 39.7676 29.7281 39.5527 29.2268C39.3379 28.7255 39.0443 28.2887 38.6719 27.9163C38.2995 27.5439 37.8626 27.2502 37.3613 27.0354C36.86 26.8206 36.3229 26.7131 35.75 26.7131ZM38.5 39.6038V37.1331C37.6406 37.5198 36.724 37.7131 35.75 37.7131C34.776 37.7131 33.8594 37.5198 33 37.1331V39.6038L35.75 38.2288L38.5 39.6038ZM35.75 11.5881C34.9909 11.5881 34.2819 11.7314 33.623 12.0178C32.9642 12.3043 32.377 12.6982 31.8613 13.1995C31.3457 13.7008 30.9518 14.2808 30.6797 14.9397C30.4076 15.5986 30.2643 16.3147 30.25 17.0881C30.25 18.4058 29.9564 19.6448 29.3691 20.8049C28.7819 21.9651 27.9512 22.9462 26.877 23.7483C27.1491 23.8772 27.4069 24.0204 27.6504 24.178C27.8939 24.3355 28.1445 24.5002 28.4023 24.6721L26.791 26.9065C26.0892 26.4052 25.3301 26.0185 24.5137 25.7463C23.6973 25.4741 22.8368 25.3367 21.9711 25.34H21.8785C19.6299 25.34 17.4535 26.0313 15.6172 27.324C13.7809 28.6167 12.3703 30.4497 11.5625 32.5881H13.75C14.5618 30.984 15.7929 29.6439 17.3175 28.7134C18.8421 27.7829 20.5992 27.2969 22.3906 27.3101C23.0254 27.3101 23.6574 27.3817 24.2773 27.524L28.9023 19.4343L37.1914 24.2193C37.3255 24.2967 37.4736 24.347 37.6271 24.3671C37.7807 24.3873 37.9367 24.377 38.0863 24.3368C38.2358 24.2967 38.3761 24.2274 38.4989 24.1331C38.6218 24.0388 38.7248 23.9211 38.8021 23.7869L39.2578 22.9998C40.0521 21.6241 40.5677 20.1054 40.775 18.5304C40.9824 16.9555 40.8774 15.3551 40.4662 13.8207C40.055 12.2863 39.3457 10.8479 38.3785 9.58773C37.4113 8.32755 36.2055 7.27021 34.8296 6.47611C33.4536 5.68201 31.9351 5.16637 30.3602 4.95892C28.7854 4.75148 27.1851 4.85628 25.6506 5.26735C24.1162 5.67842 22.6779 6.38769 21.4176 7.35469C20.1574 8.32169 19.1 9.52745 18.3059 10.9031L17.8501 11.6921C17.6943 11.9628 17.6522 12.2843 17.7332 12.5861C17.8143 12.8878 18.0118 13.145 18.2824 13.3009L26.864 18.2556L21.7285 27.2442L21.6217 27.2426C16.6591 27.2426 12.3612 30.1215 9.80139 34.1915C10.2385 34.0369 10.7045 33.981 11.1658 34.0277C11.6271 34.0744 12.0724 34.2227 12.4697 34.4618C14.6885 31.5295 18.998 29.5998 21.6217 29.5998C25.3994 29.5998 28.8361 31.6976 31.0503 34.842C31.3564 34.5603 31.7155 34.3421 32.1066 34.2003C32.4978 34.0584 32.9132 33.9956 33.3288 34.0155C31.2373 30.7815 28.0378 28.3269 24.2837 27.5239L28.9053 19.4342L37.1914 24.2192C37.3255 24.2967 37.4736 24.347 37.6271 24.3671C37.7807 24.3873 37.9367 24.377 38.0863 24.3368C38.2358 24.2967 38.3761 24.2274 38.4989 24.1331C38.6218 24.0388 38.7248 23.9211 38.8021 23.7869L39.2578 22.9998C40.0521 21.6241 40.5677 20.1054 40.775 18.5304C40.9824 16.9555 40.8774 15.3551 40.4662 13.8207C40.055 12.2863 39.3457 10.8479 38.3785 9.58773C37.4113 8.32755 36.2055 7.27021 34.8296 6.47611Z" fill="#299393"/>
          </g>
          <defs>
            <clipPath id="clip0_96_1445">
              <rect width="44" height="44" fill="white" transform="translate(0 0.588135)"/>
            </clipPath>
          </defs>
        </svg>
      ),
      title: "Безкомпромисно обслужване",
      description: "Екипът на Bulgarian Estates се състои от млади, образовани и последователни професионалисти, които познават в детайли спецификата на сделките с недвижими имоти в България и други страни по света."
    },
    {
      icon: (
        <svg width="44" height="44" viewBox="0 0 44 45" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path d="M9.77765 10.6104H29.3332V12.5659H9.77765V10.6104ZM9.77765 20.3881H19.6605V22.3437H9.77765V20.3881ZM28.573 15.4992H9.77765V17.4548H26.6186L28.573 15.4992ZM15.637 36.1206C15.9656 36.4974 16.3827 36.7866 16.8507 36.9624C17.3188 37.1382 17.8231 37.195 18.3185 37.1277H27.8568C28.0837 37.1277 28.3013 37.0375 28.4617 36.8771C28.6222 36.7167 28.7123 36.499 28.7123 36.2721C28.7123 36.0452 28.6222 35.8276 28.4617 35.6672C28.3013 35.5067 28.0837 35.4166 27.8568 35.4166H18.3185C17.2051 35.397 17.4031 34.4302 17.5595 34.1308C17.7631 33.7791 17.922 33.4034 18.0325 33.0125C18.1063 32.6977 18.0721 32.3673 17.9356 32.0743C17.7991 31.7813 17.5681 31.5427 17.2796 31.3967C16.8169 31.1884 16.2988 31.1375 15.8044 31.2516C15.3099 31.3657 14.8665 31.6386 14.5419 32.0286C14.1214 32.4625 13.5372 33.1261 12.9774 33.7715C13.3233 32.416 13.7719 30.6768 14.2119 28.9804C14.338 28.5938 14.3129 28.1738 14.1416 27.8051C13.9704 27.4363 13.6658 27.1461 13.2891 26.993C12.872 26.8499 12.4161 26.8703 12.0134 27.0502C11.6108 27.2301 11.2914 27.556 11.1196 27.9622C10.5916 28.9779 6.41165 35.9825 6.37009 36.0534C6.31247 36.1498 6.27442 36.2567 6.2581 36.3679C6.24178 36.479 6.24751 36.5923 6.27498 36.7013C6.33045 36.9213 6.47106 37.1103 6.66587 37.2267C6.86069 37.3431 7.09375 37.3773 7.3138 37.3218C7.53384 37.2663 7.72283 37.1257 7.83921 36.9309C7.99565 36.6681 11.3323 31.0789 12.3847 29.2126C11.5927 32.2681 10.72 35.6683 10.6687 35.9739C10.6111 36.1986 10.6285 36.4359 10.7183 36.6497C10.8081 36.8635 10.9654 37.0421 11.1661 37.1582C11.3898 37.2692 11.6441 37.3025 11.8889 37.2529C12.1337 37.2034 12.3549 37.0737 12.5179 36.8845C12.6719 36.7451 12.9603 36.4139 13.6875 35.5694C14.3651 34.7724 15.059 33.9896 15.769 33.2215C16.0354 32.9404 16.1968 33.065 16.0403 33.3412C15.7342 33.7279 15.5356 34.1886 15.4648 34.6767C15.394 35.1647 15.4534 35.6628 15.637 36.1206Z" fill="#299393"/>
          <path d="M34.2221 27.1041V39.6991H4.88878V5.47692H34.2221V11.5795L35.8477 9.95392C36.0979 9.70709 36.3722 9.48598 36.6666 9.29392V4.25469C36.6666 3.93054 36.5378 3.61966 36.3086 3.39045C36.0794 3.16124 35.7685 3.03247 35.4443 3.03247H3.66656C3.3424 3.03247 3.03153 3.16124 2.80232 3.39045C2.57311 3.61966 2.44434 3.93054 2.44434 4.25469V40.9214C2.44434 41.2455 2.57311 41.5564 2.80232 41.7856C3.03153 42.0148 3.3424 42.1436 3.66656 42.1436H35.4443C35.7685 42.1436 36.0794 42.0148 36.3086 41.7856C36.5378 41.5564 36.6666 41.2455 36.6666 40.9214V26.7766C35.9172 27.1749 35.0499 27.2911 34.2221 27.1041Z" fill="#299393"/>
          <path d="M41.7123 15.0848L41.0731 14.4456C41.3993 14.0137 41.5645 13.4814 41.5399 12.9406C41.5154 12.3999 41.3027 11.8847 40.9386 11.4842C40.4656 11.0672 39.8469 10.854 39.2173 10.8911C38.5878 10.9282 37.9984 11.2125 37.5775 11.6822L22.2692 26.988L21.2462 30.8283C21.23 30.8785 21.228 30.9323 21.2405 30.9836C21.253 31.0349 21.2794 31.0817 21.3169 31.1189C21.3543 31.1561 21.4014 31.1822 21.4527 31.1943C21.5041 31.2065 21.5578 31.2041 21.608 31.1876L25.4348 30.1524L39.725 15.8622L40.3288 16.4672C40.3711 16.5092 40.4047 16.5592 40.4276 16.6142C40.4505 16.6693 40.4623 16.7283 40.4623 16.788C40.4623 16.8476 40.4505 16.9067 40.4276 16.9617C40.4047 17.0168 40.3711 17.0668 40.3288 17.1088L34.3191 23.1185C34.1358 23.302 34.0329 23.5507 34.033 23.8101C34.0331 24.0694 34.1362 24.3181 34.3197 24.5014C34.5032 24.6847 34.752 24.7877 35.0113 24.7875C35.2707 24.7874 35.5193 24.6843 35.7027 24.5008L41.7123 18.4912C41.9363 18.2675 42.1139 18.0019 42.2351 17.7096C42.3564 17.4172 42.4188 17.1039 42.4188 16.7874C42.4188 16.4709 42.3564 16.1575 42.2351 15.8652C42.1139 15.5728 41.9363 15.3072 41.7123 15.0836" fill="#299393"/>
        </svg>
      ),
      title: "Договор и гаранция",
      description: "Ние ще защитаваме отговорно и усърдно Вашите интереси на всеки етап от сделката. Ще ви информираме подробно за всички алтернативи, за да изпитате увереност, че сте направили оптималния избор."
    },
    {
      icon: (
        <svg width="44" height="44" viewBox="0 0 44 45" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path d="M34.8149 5.26778C33.4393 4.47341 31.9207 3.95777 30.3459 3.75032C28.771 3.54287 27.1707 3.64767 25.6363 4.05873C24.1019 4.4698 22.6635 5.17907 21.4033 6.14607C20.143 7.11306 19.0856 8.31882 18.2914 9.6945L17.8356 10.4834C17.6797 10.7541 17.6376 11.0756 17.7186 11.3774C17.7997 11.6791 17.9972 11.9363 18.2678 12.0925L26.8494 17.0472L21.7139 26.0358L21.6071 26.0342C16.6445 26.0342 12.3466 28.9131 9.78679 32.9831C10.2239 32.8285 10.6899 32.7726 11.1512 32.8193C11.6125 32.866 12.0578 33.0143 12.4551 33.2534C14.6739 30.3211 17.9834 28.3914 21.6071 28.3914C25.3848 28.3914 28.8215 30.4892 31.0357 33.6336C31.3418 33.3519 31.7009 33.1337 32.092 32.9919C32.4832 32.85 32.8986 32.7872 33.3142 32.8071C31.2227 29.5731 28.0232 27.1185 24.2691 26.3155L28.8907 18.2258L37.1768 23.0108C37.3109 23.0883 37.459 23.1385 37.6125 23.1587C37.7661 23.179 37.9221 23.1687 38.0717 23.1286C38.2213 23.0884 38.3615 23.0192 38.4843 22.9248C38.6072 22.8305 38.7102 22.7128 38.7875 22.5786L39.2432 21.7914C40.0375 20.4157 40.5531 18.897 40.7604 17.322C40.9678 15.7471 40.8628 14.1467 40.4516 12.6123C40.0404 11.078 39.331 9.63959 38.3638 8.3794C37.3967 7.11922 36.1908 6.06188 34.8149 5.26778ZM31.3735 16.9372L26.4109 14.0709C27.3098 12.6865 28.1647 11.6321 29.1892 10.7002C30.1871 9.79193 31.3782 8.97164 32.9937 8.07907C33.2325 9.57979 33.3048 10.8291 33.1508 12.0548C32.9685 13.5194 32.4515 15.0295 31.3704 16.9356M33.4101 18.1142C34.6044 16.0116 35.2581 14.2014 35.4891 12.3471C35.6415 11.1308 35.6069 9.93021 35.4545 8.66207C37.0127 10.1359 38.0411 12.0827 38.38 14.2006C38.719 16.3184 38.3496 18.489 37.3292 20.3755L33.4101 18.1142ZM27.6021 8.95593C26.3607 10.0858 25.3628 11.3429 24.3649 12.8908L20.4678 10.6405C21.5674 8.85292 23.2147 7.46818 25.1648 6.69236C27.1148 5.91655 29.2632 5.79113 31.2902 6.33478C29.8304 7.1755 28.6424 8.00836 27.6021 8.95593ZM11.9506 35.5728C11.8699 35.3303 11.7126 35.1206 11.5024 34.9753C11.2921 34.83 11.0403 34.757 10.7849 34.7673C10.5296 34.7776 10.2845 34.8706 10.0845 35.0306C9.88446 35.1906 9.74159 35.4092 9.67663 35.6559C9.61167 35.9025 9.62826 36.1636 9.72424 36.4003C9.82022 36.637 9.99085 36.8359 10.2106 36.9671C10.4304 37.0983 10.6868 37.1551 10.9425 37.1289C11.1982 37.1027 11.4398 36.9949 11.6316 36.8207C11.8234 36.6465 11.9548 36.4155 12.0063 36.1617C12.0578 35.9079 12.0266 35.6445 11.9183 35.4097L11.9506 35.5728Z" fill="#299393"/>
        </svg>
      ),
      title: "Максимален комфорт",
      description: "Доверете ни се! Нашата мисия е Вашият максимален комфорт. За нас компромисите в работата са недопустими, защото удовлетворението на клиента е гарант за бъдещите ни успехи."
    }
  ]

  return (
    <section className="features-section">
      <div className="features-container">
        <div className="features-header">
          <h2 className="features-title">
            Когато домът ти е въпрос на избор.
          </h2>
        </div>
        
        <div className="features-content">
          <div className="features-grid">
            {features.map((feature, index) => (
              <div key={index} className="feature-card">
                <div className="feature-title-container">
                  <div className="feature-icon">
                    {feature.icon}
                  </div>
                  <h3 className="feature-title">{feature.title}</h3>
                  <button 
                    className="feature-toggle-btn"
                    onClick={() => toggleCard(index)}
                    aria-label={expandedCards.includes(index) ? 'Свие описанието' : 'Разшири описанието'}
                  >
                    <svg 
                      width="16" 
                      height="16" 
                      viewBox="0 0 16 16" 
                      fill="none" 
                      xmlns="http://www.w3.org/2000/svg"
                      className={expandedCards.includes(index) ? 'rotated' : ''}
                    >
                      <path 
                        d="M4 6L8 10L12 6" 
                        stroke="currentColor" 
                        strokeWidth="2" 
                        strokeLinecap="round" 
                        strokeLinejoin="round"
                      />
                    </svg>
                  </button>
                </div>
                <div className="feature-description-container">
                  <p className={`feature-description ${expandedCards.includes(index) ? 'expanded' : ''}`}>
                    {feature.description}
                  </p>
                </div>
              </div>
            ))}
          </div>
          
          <div className="features-image">
            <img 
              src={getImagePath("/images/features-bg.jpg")} 
              alt="Bulgarian coastal properties" 
            />
          </div>
        </div>
      </div>
    </section>
  )
}
